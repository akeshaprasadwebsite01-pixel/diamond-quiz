<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diamond Quiz Pro - Official Premium</title>

    <script src="https://pl28762541.effectivegatecpm.com/49/fe/bc/49febcbf5c03dbc1bd4f30769154431e.js" async></script>

    <style>
        :root { 
            --primary: #0062ff; 
            --accent: #00d4ff;
            --secondary: #00c853; 
            --dark: #1a1a2e;
            --bg: #0f0f1b; 
            --text: #ffffff; 
            --card-bg: #16213e; 
        }

        body { 
            font-family: 'Poppins', 'Segoe UI', sans-serif; 
            background: var(--bg); 
            color: var(--text); 
            text-align: center; 
            margin: 0; 
            padding: 10px;
            background: linear-gradient(135deg, #0f0f1b 0%, #16213e 100%);
            min-height: 100vh;
        }

        .container { 
            max-width: 450px; 
            margin: 30px auto; 
            background: var(--card-bg); 
            padding: 30px; 
            border-radius: 25px; 
            box-shadow: 0 15px 35px rgba(0,0,0,0.5); 
            border: 1px solid rgba(255,255,255,0.1);
        }

        .stats-bar { 
            display: flex; 
            justify-content: space-around; 
            background: rgba(255,255,255,0.05); 
            padding: 15px; 
            border-radius: 15px; 
            margin-bottom: 25px; 
        }

        .stat-box span { font-size: 12px; color: #aaa; display: block; text-transform: uppercase; }
        .stat-box b { color: var(--accent); font-size: 22px; }

        .q-display { 
            font-size: 50px; 
            background: rgba(0,0,0,0.3); 
            padding: 30px; 
            border-radius: 20px; 
            margin-bottom: 25px; 
            border-bottom: 4px solid var(--primary);
            color: #fff;
            text-shadow: 0 0 10px var(--primary);
        }

        input { 
            width: 85%; 
            padding: 15px; 
            border-radius: 12px; 
            margin-bottom: 15px; 
            text-align: center; 
            font-size: 18px; 
            border: 2px solid rgba(255,255,255,0.1); 
            background: rgba(0,0,0,0.2);
            color: white;
            outline: none;
        }

        .btn { 
            width: 100%; 
            padding: 16px; 
            margin: 10px 0; 
            border-radius: 15px; 
            border: none; 
            font-size: 17px; 
            font-weight: bold; 
            cursor: pointer; 
            transition: 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-blue { background: linear-gradient(to right, var(--primary), var(--accent)); color: white; box-shadow: 0 5px 15px rgba(0,98,255,0.4); }
        .btn-green { background: linear-gradient(to right, #00c853, #b2ff59); color: #000; box-shadow: 0 5px 15px rgba(0,200,83,0.3); }
        .btn-orange { background: linear-gradient(to right, #ff9100, #ffea00); color: #000; }

        #ad-break-overlay { 
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: var(--bg); z-index: 999999; flex-direction: column; justify-content: center; align-items: center; 
        }

        .timer-circle { width: 70px; height: 70px; border: 5px solid #222; border-top: 5px solid var(--accent); border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 20px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .withdraw-card { background: rgba(0,0,0,0.4); padding: 20px; border-radius: 15px; margin-top: 20px; border: 1px solid #ff9100; display: none; }
        .survey-item { 
            background: rgba(255,255,255,0.05); padding: 15px; margin: 10px 0; border-radius: 15px; 
            display: flex; justify-content: space-between; align-items: center; cursor: pointer; border: 1px solid rgba(255,255,255,0.05);
        }
        .hidden { display: none; }
    </style>
</head>
<body onload="checkSavedData()">

<div id="ad-break-overlay">
    <div class="timer-circle"></div>
    <h2 style="color: var(--accent);">SECURITY VERIFICATION</h2>
    <p id="ad-status">Please complete the task to continue.</p>
    <a id="task-link-btn" href="#" target="_blank" class="btn btn-blue" style="width: 250px; text-decoration: none;">START TASK / WATCH AD</a>
    <p id="ad-timer" style="font-size: 32px; font-weight: bold; color: var(--accent); display: none;">60</p>
    <button id="back-to-game-btn" class="btn btn-green" style="width: 250px; display: none;">CLAIM REWARDS</button>
</div>

<div class="container">
    <h2 style="color: var(--accent); margin: 0; letter-spacing: 2px;">ðŸ’Ž DIAMOND QUIZ PRO</h2>
    <p style="color: #888; font-size: 13px; margin-bottom: 20px;">Earn 10,000 Coins to Withdraw</p>

    <div id="login-step">
        <input type="text" id="playerName" placeholder="Enter Full Name">
        <button class="btn btn-blue" onclick="startGame()">ENTER GAME</button>
    </div>

    <div id="game-step" class="hidden">
        <div class="stats-bar">
            <div class="stat-box"><span>PLAYER</span><b id="dispName">...</b></div>
            <div class="stat-box"><span>BALANCE</span><b id="coinCount">0</b></div>
        </div>

        <div id="qBox" class="q-display"></div>
        <input type="number" id="userAnswer" placeholder="Enter Answer">
        <button class="btn btn-green" onclick="processAnswer()">SUBMIT ANSWER (+10)</button>
        <button class="btn btn-orange" onclick="toggleWithdraw()">WITHDRAW NOW</button>

        <div id="withdraw-form" class="withdraw-card">
            <h3 style="color: #ff9100; margin-top:0;">Withdraw Rewards</h3>
            <p style="font-size: 12px; color: #ccc;">Min: 10,000 Coins</p>
            <input type="text" id="ffid" placeholder="Free Fire ID">
            <input type="text" id="whatsapp" placeholder="WhatsApp Number">
            <button class="btn btn-blue" onclick="handleWithdrawSubmit()">SUBMIT TO ADMIN</button>
        </div>

        <div style="margin-top:30px; text-align:left;">
            <h4 style="border-left: 4px solid var(--accent); padding-left: 10px;">Bonus Tasks</h4>
            <div id="surveyList"></div>
        </div>
    </div>
</div>

<script>
    let coins = 0;
    let correctAnswer;
    let playerName = "";
    const ADMIN_WA = "94741580340"; 
    const DIRECT_AD = "https://www.effectivegatecpm.com/tv3xfsg5b?key=7385919c5e251f958807bf428e4ad0f2";

    function checkSavedData() {
        const savedName = localStorage.getItem('quiz_name_v2');
        const savedCoins = localStorage.getItem('quiz_coins_v2');
        if(savedName && savedCoins) {
            playerName = savedName;
            coins = parseInt(savedCoins);
            showGameUI();
        }
    }

    function startGame() {
        playerName = document.getElementById('playerName').value;
        if(!playerName) return alert("Enter your name!");
        localStorage.setItem('quiz_name_v2', playerName);
        localStorage.setItem('quiz_coins_v2', 0);
        showGameUI();
    }

    function showGameUI() {
        document.getElementById('login-step').classList.add('hidden');
        document.getElementById('game-step').classList.remove('hidden');
        document.getElementById('dispName').innerText = playerName;
        document.getElementById('coinCount').innerText = coins;
        generateQ();
        generateSurveys();
        setInterval(() => showOverlay(15, "SECURITY CHECK", "Please watch this ad to continue.", false), 300000); 
    }

    function generateQ() {
        let n1 = Math.floor(Math.random() * 30) + 1;
        let n2 = Math.floor(Math.random() * 20) + 1;
        correctAnswer = n1 + n2;
        document.getElementById('qBox').innerText = `${n1} + ${n2}`;
    }

    function generateSurveys() {
        const list = document.getElementById('surveyList');
        const tasks = ["Install Game App", "Complete Survey", "Install VPN", "Watch Video"];
        list.innerHTML = ""; 
        tasks.forEach(t => {
            list.innerHTML += `<div class="survey-item" onclick="verifyTask(50)">
                <span><b>${t}</b><br><small style="color:var(--secondary)">Reward: +50 Coins</small></span>
                <span style="color:var(--accent); font-weight:bold;">START ></span>
            </div>`;
        });
    }

    function showOverlay(seconds, title, status, isSurvey, reward = 0) {
        const overlay = document.getElementById('ad-break-overlay');
        const timerTxt = document.getElementById('ad-timer');
        const statusTxt = document.getElementById('ad-status');
        const backBtn = document.getElementById('back-to-game-btn');
        const taskBtn = document.getElementById('task-link-btn');

        overlay.style.display = 'flex';
        taskBtn.style.display = 'inline-block';
        taskBtn.href = DIRECT_AD;
        backBtn.style.display = 'none';
        timerTxt.style.display = 'none';
        statusTxt.innerText = status;

        taskBtn.onclick = function() {
            taskBtn.style.display = 'none';
            timerTxt.style.display = 'block';
            let time = seconds;
            let itv = setInterval(() => {
                time--;
                timerTxt.innerText = time;
                if(time <= 0) {
                    clearInterval(itv);
                    timerTxt.style.display = 'none';
                    backBtn.style.display = 'block';
                    backBtn.onclick = function() {
                        if(isSurvey) { 
                            coins += reward; 
                            saveProgress(); 
                            alert("Bonus Added!");
                        }
                        overlay.style.display = 'none';
                    };
                }
            }, 1000);
        };
    }

    function verifyTask(reward) { showOverlay(60, "BONUS TASK", "Click below and wait 60s for verification.", true, reward); }

    function processAnswer() {
        let userInp = document.getElementById('userAnswer');
        if(userInp.value == correctAnswer) {
            window.open(DIRECT_AD, '_blank'); 
            coins += 10;
            saveProgress();
            alert("Correct! +10 Coins");
            generateQ();
        } else { alert("Wrong!"); }
        userInp.value = "";
    }

    function saveProgress() {
        localStorage.setItem('quiz_coins_v2', coins);
        document.getElementById('coinCount').innerText = coins;
    }

    function toggleWithdraw() {
        const f = document.getElementById('withdraw-form');
        f.style.display = (f.style.display === 'block') ? 'none' : 'block';
    }

    function handleWithdrawSubmit() {
        if(coins < 10000) return alert("Minimum withdrawal is 10,000 coins!");
        let ffid = document.getElementById('ffid').value;
        let wa = document.getElementById('whatsapp').value;
        if(!ffid || !wa) return alert("Enter all details!");
        let msg = `PREMIUM WITHDRAW REQUEST%0AName: ${playerName}%0AFFID: ${ffid}%0AWA: ${wa}%0ACoins: ${coins}`;
        window.open(`https://wa.me/${ADMIN_WA}?text=${msg}`, '_blank');
    }
</script>
</body>
</html>
